<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>

    <!-- Import pure.css for grid layout -->
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css"
        integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Source+Sans+Pro:wght@400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">

    <title>Climate Insights: Australia's Changing Landscape</title>
</head>

<body>
    <div class="page">
        <!-- Title Section -->
        <header>
            <h1 class="page-title">Climate Insights: Australia's Changing Landscape</h1>
            <p class="page-intro">A visual journey through Australia's climate and environmental shifts</p>
        </header>

        <!-- Main content -->
        <main>
            <!-- Temperature Visualization -->
            <div class="pure-g">
                <div class="pure-u-1">
                    <h2>Average Max Temperature at Weather Stations (2000-2080)</h2>
                    <div class="vis-container">
                        <div id="temperature_chart"></div>
                        <div class="overlay-text">
                            <p>This visualization shows the projected changes in maximum temperature across 45 weather
                                stations in Australia from 2000 to 2080. The animation cycles through key years,
                                illustrating the expected temperature increases due to climate change.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Extreme Weather and CO2 Emissions -->
            <div class="two-column">
                <section>
                    <h2>Nature's Fury Unleashed</h2>
                    <p class="intro-text">Explore the surge in extreme weather events that have reshaped Australia's
                        landscape from 2010 to 2019.</p>
                    <div id="extreme_weather_chart" class="vis-container"></div>
                </section>
                <section>
                    <h2>The Carbon Footprint</h2>
                    <p class="intro-text">Uncover the state-by-state story of CO2 emissions per capita from 1990 to
                        2017.</p>
                    <div id="co2emission_chart" class="vis-container"></div>
                </section>
            </div>

            <!-- Economic Impact Stream Graph -->
            <section class="full-width">
                <h2>The Economic Ripple Effect</h2>
                <p class="intro-text">Visualize the projected economic impact of climate change on Local Government
                    Areas from 2030 to 2100.</p>
                <div id="economicimpact_chart" class="vis-container"></div>
            </section>
        </main>

        <!-- Footer Section -->
        <footer>
            <p>Data visualizations by <a href="#">FIT3179 Teaching Team</a>. Sources: <a href="#">Data Repository</a>.
            </p>
        </footer>

    </div> <!-- end page -->

    <script>
        // Embed the Average Max Temperature visualization
        vegaEmbed("#temperature_chart", "max_temp.vg.json").then(function (result) {
            var view = result.view;

            // Define the years and the interval for the animation
            const years = [2000, 2020, 2040, 2080];
            let yearIndex = 0;

            function animateYear() {
                view.signal("yearSelection", years[yearIndex]).run();
                yearIndex = (yearIndex + 1) % years.length;  // Cycle through the years
            }

            // Set the interval for year change (e.g., every 2 seconds)
            setInterval(animateYear, 2000);
        }).catch(console.error);

        // Embed the Extreme Weather Events Sunburst Chart
        vegaEmbed("#extreme_weather_chart", "extremeweather.vg.json").then(function (result) {
            console.log('Extreme Weather Visualization successfully embedded.');
        }).catch(console.error);

        // Embed the CO2 Emissions Choropleth Map
        vegaEmbed("#co2emission_chart", "co2emission.vg.json").then(function (result) {
            console.log('CO2 Emissions Choropleth Map successfully embedded.');
        }).catch(console.error);

        // Embed the Economic Impact Stream Graph
        vegaEmbed("#economicimpact_chart", "economicimpact.vg.json").then(function (result) {
            console.log('Economic Impact Streamgraph successfully embedded.');
        }).catch(console.error);
    </script>

</body>

</html>